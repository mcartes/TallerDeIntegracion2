<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Página</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Descripción que sale en las búsquedas">

        <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/styleEditor.css')}}">

        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
        
        <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.7/css/fileinput.css" media="all" rel="stylesheet" type="text/css"/>
        <!-- Editor -->
        <script type="text/javascript" src="https://raw.githack.com/eKoopmans/html2pdf/master/dist/html2pdf.bundle.js"></script> 
        <link href="https://cdn.jsdelivr.net/npm/froala-editor@latest/css/froala_editor.pkgd.min.css" rel="stylesheet" type="text/css" />
		<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/froala-editor@latest/js/froala_editor.pkgd.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        
    </head>
<body>
    <header class="navbar navbar-expand navbar-dark bg-dark d-flex justify-content-center py-3"><!-- justify-content-center -->
        <div class="container-fluid">
            <img class="imagenNavbar" src="{{url_for('static', filename='logoLeFroge.png')}}" alt="logoLeFroge.png">
            <ul class="nav nav-pills">
                <li class="nav-item"><a href="http://127.0.0.1:5000/" class="nav-link" style="color: white;">Inicio</a></li>

                <!-- Si el usuario está logueado, mandar al proyecto, si no está logueado mandar a loguearse -->
                <li class="nav-item"><a href="http://127.0.0.1:5000/proyecto" class="nav-link" style="color: white;">Proyecto</a></li>

                <!-- Si el usario está logueado, mostrar Cerrar Sesión, si no está logueado mostrar Iniciar Sesión -->
                <li class="nav-item"><a href="http://127.0.0.1:5000/login" class="nav-link" style="color: white;">Iniciar Sesión</a></li>
                <li class="nav-item"><a href="https://github.com/mcartes/TallerdeIntegracion2.git" class="nav-link bi bi-github" style="color: white;"> Repositorio</a></li>
            </ul>
            <img class="imagenNavbar" src="{{url_for('static', filename='logoUniversidad.png')}}" alt="logoUniversidad.png">
        </div>
    </header>
    <section>
        <div class="container-small d-flex bd-highlight">
            <div class="listaObjetos p-2 bd-highlight bg-light border rounded-3">
                <div class="flex-shrink-0 p-3 bg-white">
                    <ul class="list-unstyled ps-0">
                        <li class="mb-1">
                            <button class="listaBotones btn btn-primary btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#home-collapse" aria-expanded="true">Guardar y exportar <span class="bi bi-caret-down-fill"></span></button>
                            <div class="collapse show" id="home-collapse">
                                <ul class="listaBotones btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                    <li><button class="listaBotones btn btn-light border rounded-3 bi bi-download" onclick="guardar()"><a> Guardar</a></button></li>
                                    <li><button class="listaBotones btn btn-light border rounded-3 bi bi-file-text-fill"" onclick="exportarJSON()"><a> Exportar JSON</a></button></li>
                                    <li><button class="listaBotones btn btn-light border rounded-3 bi bi-file-earmark-pdf-fill" onclick="DescargaPDF()"><a> Exportar PDF</a></button></li>
                                    <li><button class="listaBotones btn btn-light border rounded-3 bi-file-medical" onclick=""><a> Exportar ODT</a></button></li>
                                </ul>
                            </div>
                        </li>
                        <li class="mb-1">
                            <button class="listaBotones btn btn-primary align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#dashboard-collapse" aria-expanded="false">Bloques de edición <span class="bi bi-caret-down-fill"></span></button>
                            <div class="collapse show" id="dashboard-collapse">
                                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                    <!-- Bloques de edición -->
                                    <li>
                                        <div id="drag-block-1" class="editBlock" draggable="true">Bloque de código.</div>
                                    </li>
                                    <li>
                                        <div id="drag-block-2" class="editBlock" draggable="true">Encabezado H3</div>
                                    </li>
                                    <li>
                                        <div id="drag-block-3" class="editBlock" draggable="true">Párrafo simple.</div>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="mb-1">
                            <button class="listaBotones btn btn-primary btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#orders-collapse" aria-expanded="false">Insertar arquetipos <span class="bi bi-caret-down-fill"></span></button>
                            <div class="collapse" id="orders-collapse">
                                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                    <!-- Arquetipos -->
                                    <li>
                                        <div id="drag-arquetipo-1" class="arquetipo" draggable="true">Cultural.</div>
                                    </li>
                                    <li>
                                        <div id="drag-arquetipo-2" class="arquetipo" draggable="true">Científico.</div>
                                    </li>
                                    <li>
                                        <div id="drag-arquetipo-3" class="arquetipo" draggable="true">Informativo.</div>
                                    </li>
                                    <li>
                                        <div id="drag-arquetipo-4" class="arquetipo" draggable="true">Instructivo.</div>
                                    </li>
                                    <li>
                                        <div id="drag-arquetipo-5" class="arquetipo" draggable="true">Narrativo.</div>
                                    </li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- Columna 2 - Editor -->
            <div class="p-2 flex-grow-1 bd-highlight">
                <div class="">
                    <div id="froala-editor">
                        
                    </div>
                </div>
            </div>
        </div>        
    </section>
</body>
<script type="text/javascript" src="{{url_for('static', filename='js/editor.js')}}"></script>

<!-- Boostrap -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>

<!-- Variables -->
<script>
    docu = {{ doc | tojson }}
</script>
<script>
    

    function DescargaPDF() {
        var worker = html2pdf().from(editor.html.get()).save();
    }
    
</script>
</html>